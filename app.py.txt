# app.py

import streamlit as st
from agents import (
    resume_analyzer,
    career_decision_agent,
    roadmap_planner,
    feedback_agent
)

st.set_page_config(page_title="Agentic AI Career Mentor")

st.title("ğŸ§  Agentic AI â€“ Career Mentor")

resume_text = st.text_area("ğŸ“„ Paste your resume here")

if st.button("Analyze Career"):
    profile = resume_analyzer(resume_text)

    role, scores, missing = career_decision_agent(profile)
    roadmap = roadmap_planner(role, missing)

    st.session_state["roadmap"] = roadmap

    st.subheader("ğŸ‘¤ Extracted Profile")
    st.json(profile)

    st.subheader("ğŸ¯ Recommended Career")
    st.write(role)

    st.subheader("ğŸ“Š Career Match Scores (%)")
    st.json(scores)

    st.subheader("â— Missing Skills")
    st.write(missing)

    st.subheader("ğŸ›£ï¸ Career Roadmap")
    st.text(roadmap)

# Feedback buttons
if "roadmap" in st.session_state:
    st.subheader("ğŸ” Provide Feedback")

    col1, col2 = st.columns(2)

    if col1.button("âŒ Rejected"):
        updated = feedback_agent("Rejected", st.session_state["roadmap"])
        st.text(updated)

    if col2.button("ğŸ¯ Interview"):
        updated = feedback_agent("Interview", st.session_state["roadmap"])
        st.text(updated)
